<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ITSM Dashboard ‚Äî IT Service Management</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<style>
  :root {
    --bg: #0f172a;
    --card: #1e293b;
    --card-hover: #273548;
    --border: #334155;
    --text: #e2e8f0;
    --text-muted: #94a3b8;
    --accent: #3b82f6;
    --accent2: #8b5cf6;
    --green: #22c55e;
    --red: #ef4444;
    --orange: #f59e0b;
    --cyan: #06b6d4;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
  }
  .header {
    background: linear-gradient(135deg, #1e3a5f 0%, #0f172a 100%);
    border-bottom: 1px solid var(--border);
    padding: 20px 32px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .header h1 {
    font-size: 22px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .header h1 .icon { font-size: 28px; }
  .header .meta {
    font-size: 13px;
    color: var(--text-muted);
  }
  .filters {
    background: var(--card);
    border-bottom: 1px solid var(--border);
    padding: 12px 32px;
    display: flex;
    gap: 16px;
    align-items: center;
    flex-wrap: wrap;
  }
  .filters label {
    font-size: 13px;
    color: var(--text-muted);
    margin-right: 4px;
  }
  .filters select {
    background: var(--bg);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 6px 12px;
    font-size: 13px;
    cursor: pointer;
  }
  .filters select:focus { outline: none; border-color: var(--accent); }
  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 24px 32px;
  }
  .kpi-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 24px;
  }
  .kpi-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    transition: background 0.2s;
  }
  .kpi-card:hover { background: var(--card-hover); }
  .kpi-card .label {
    font-size: 12px;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
  }
  .kpi-card .value {
    font-size: 32px;
    font-weight: 700;
    line-height: 1.1;
  }
  .kpi-card .change {
    font-size: 12px;
    margin-top: 6px;
    display: flex;
    align-items: center;
    gap: 4px;
  }
  .kpi-card .change.up { color: var(--green); }
  .kpi-card .change.down { color: var(--red); }
  .kpi-card .change.neutral { color: var(--orange); }
  .chart-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 24px;
  }
  .chart-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
  }
  .chart-card h3 {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 16px;
    color: var(--text);
  }
  .chart-card canvas { max-height: 280px; }
  .full-width { grid-column: 1 / -1; }
  .table-card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 20px;
    margin-bottom: 24px;
  }
  .table-card h3 {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 16px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }
  th {
    text-align: left;
    padding: 10px 12px;
    border-bottom: 2px solid var(--border);
    color: var(--text-muted);
    font-weight: 500;
    text-transform: uppercase;
    font-size: 11px;
    letter-spacing: 0.5px;
  }
  td {
    padding: 10px 12px;
    border-bottom: 1px solid var(--border);
  }
  tr:hover td { background: rgba(59,130,246,0.05); }
  .badge {
    display: inline-block;
    padding: 2px 10px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
  }
  .badge-critical { background: rgba(239,68,68,0.15); color: var(--red); }
  .badge-high { background: rgba(245,158,11,0.15); color: var(--orange); }
  .badge-medium { background: rgba(59,130,246,0.15); color: var(--accent); }
  .badge-low { background: rgba(34,197,94,0.15); color: var(--green); }
  .badge-open { background: rgba(59,130,246,0.15); color: var(--accent); }
  .badge-inprogress { background: rgba(245,158,11,0.15); color: var(--orange); }
  .badge-resolved { background: rgba(34,197,94,0.15); color: var(--green); }
  .badge-closed { background: rgba(148,163,184,0.15); color: var(--text-muted); }
  .sla-bar {
    width: 100%;
    height: 6px;
    background: rgba(255,255,255,0.1);
    border-radius: 3px;
    overflow: hidden;
    margin-top: 4px;
  }
  .sla-bar-fill {
    height: 100%;
    border-radius: 3px;
    transition: width 0.6s ease;
  }
  .footer {
    text-align: center;
    padding: 20px;
    font-size: 12px;
    color: var(--text-muted);
    border-top: 1px solid var(--border);
  }
  @media (max-width: 900px) {
    .chart-grid { grid-template-columns: 1fr; }
    .kpi-row { grid-template-columns: repeat(2, 1fr); }
    .container { padding: 16px; }
  }
</style>
</head>
<body>

<div class="header">
  <h1><span class="icon">üõ†Ô∏è</span> ITSM Dashboard</h1>
  <div class="meta">Last refreshed: Feb 10, 2026 09:00 AM &nbsp;|&nbsp; Data: Sep 2025 ‚Äì Feb 2026</div>
</div>

<div class="filters">
  <div>
    <label>Period:</label>
    <select id="filterPeriod" onchange="applyFilters()">
      <option value="all">All 6 Months</option>
      <option value="3">Last 3 Months</option>
      <option value="1">Current Month</option>
    </select>
  </div>
  <div>
    <label>Priority:</label>
    <select id="filterPriority" onchange="applyFilters()">
      <option value="all">All Priorities</option>
      <option value="Critical">Critical</option>
      <option value="High">High</option>
      <option value="Medium">Medium</option>
      <option value="Low">Low</option>
    </select>
  </div>
  <div>
    <label>Category:</label>
    <select id="filterCategory" onchange="applyFilters()">
      <option value="all">All Categories</option>
      <option value="Network">Network</option>
      <option value="Hardware">Hardware</option>
      <option value="Software">Software</option>
      <option value="Access">Access Management</option>
      <option value="Email">Email</option>
      <option value="Database">Database</option>
    </select>
  </div>
</div>

<div class="container">
  <div class="kpi-row" id="kpiRow"></div>
  <div class="chart-grid">
    <div class="chart-card">
      <h3>üìà Ticket Volume Trend</h3>
      <canvas id="trendChart"></canvas>
    </div>
    <div class="chart-card">
      <h3>üéØ Tickets by Priority</h3>
      <canvas id="priorityChart"></canvas>
    </div>
    <div class="chart-card">
      <h3>üìÇ Tickets by Category</h3>
      <canvas id="categoryChart"></canvas>
    </div>
    <div class="chart-card">
      <h3>‚è±Ô∏è Avg Resolution Time (Hours)</h3>
      <canvas id="resolutionChart"></canvas>
    </div>
    <div class="chart-card full-width">
      <h3>üìä SLA Compliance by Month</h3>
      <canvas id="slaChart"></canvas>
    </div>
  </div>

  <div class="table-card">
    <h3>üî• Recent Critical / High Priority Tickets</h3>
    <table>
      <thead>
        <tr>
          <th>Ticket ID</th>
          <th>Title</th>
          <th>Priority</th>
          <th>Status</th>
          <th>Category</th>
          <th>Assigned To</th>
          <th>Created</th>
          <th>SLA</th>
        </tr>
      </thead>
      <tbody id="ticketTableBody"></tbody>
    </table>
  </div>

  <div class="chart-grid">
    <div class="chart-card">
      <h3>üë• Tickets by Assignee</h3>
      <canvas id="assigneeChart"></canvas>
    </div>
    <div class="chart-card">
      <h3>üìã Status Distribution</h3>
      <canvas id="statusChart"></canvas>
    </div>
  </div>
</div>

<div class="footer">
  ITSM Dashboard ‚Äî Sample Data for Demonstration &nbsp;|&nbsp; Built with Chart.js
</div>

<script>
// ‚îÄ‚îÄ SAMPLE DATA GENERATION ‚îÄ‚îÄ
const months = ['Sep 2025','Oct 2025','Nov 2025','Dec 2025','Jan 2026','Feb 2026'];
const priorities = ['Critical','High','Medium','Low'];
const categories = ['Network','Hardware','Software','Access','Email','Database'];
const statuses = ['Open','In Progress','Resolved','Closed'];
const assignees = ['Alex Chen','Maria Garcia','James Wilson','Priya Patel','David Kim','Sara Johnson'];
const titles = {
  Network: ['VPN connectivity failure','Network latency spike','Firewall rule blocking traffic','DNS resolution timeout','Wi-Fi outage in Building B','Switch port failure'],
  Hardware: ['Laptop screen flickering','Printer offline - 3rd floor','Monitor not detected','Keyboard malfunction','Docking station issue','Server disk failure'],
  Software: ['Outlook crashing on startup','SAP login error','CRM sync failure','Windows update broke app','License expired for Adobe','Java runtime exception'],
  Access: ['New employee onboarding access','VPN access request','Admin rights needed','Password reset - locked out','MFA token not working','Shared drive permission'],
  Email: ['Email delivery delayed','Mailbox full alert','Distribution list update','Email attachment blocked','Calendar sync issue','Spam filter false positive'],
  Database: ['DB connection timeout','Slow query performance','Backup job failed','Replication lag alert','Storage threshold warning','Index corruption detected']
};

function randomInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }
function randomChoice(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

let allTickets = [];
let ticketId = 1000;

months.forEach((month, mi) => {
  const baseCount = randomInt(80, 140);
  for (let i = 0; i < baseCount; i++) {
    const cat = randomChoice(categories);
    const pri = randomChoice(priorities);
    const status = randomChoice(statuses);
    const daysInMonth = [30,31,30,31,31,28][mi];
    const day = randomInt(1, daysInMonth);
    const monthNum = ((mi + 8) % 12) + 1;
    const year = mi < 4 ? 2025 : 2026;
    const dateStr = `${year}-${String(monthNum).padStart(2,'0')}-${String(day).padStart(2,'0')}`;

    let resHours = 0;
    if (status === 'Resolved' || status === 'Closed') {
      if (pri === 'Critical') resHours = randomInt(1, 8);
      else if (pri === 'High') resHours = randomInt(2, 24);
      else if (pri === 'Medium') resHours = randomInt(4, 72);
      else resHours = randomInt(8, 120);
    }

    let slaMet = true;
    if (pri === 'Critical' && resHours > 4) slaMet = false;
    else if (pri === 'High' && resHours > 8) slaMet = false;
    else if (pri === 'Medium' && resHours > 24) slaMet = false;
    else if (pri === 'Low' && resHours > 72) slaMet = false;
    if (status === 'Open' || status === 'In Progress') slaMet = Math.random() > 0.3;

    allTickets.push({
      id: `INC-${ticketId++}`,
      title: randomChoice(titles[cat]),
      priority: pri,
      category: cat,
      status: status,
      assignee: randomChoice(assignees),
      date: dateStr,
      month: month,
      monthIndex: mi,
      resolutionHours: resHours,
      slaMet: slaMet
    });
  }
});

// ‚îÄ‚îÄ CHART INSTANCES ‚îÄ‚îÄ
let charts = {};
const chartDefaults = {
  color: '#94a3b8',
  borderColor: '#334155',
  font: { family: "'Segoe UI', system-ui, sans-serif" }
};
Chart.defaults.color = chartDefaults.color;
Chart.defaults.borderColor = chartDefaults.borderColor;
Chart.defaults.font.family = chartDefaults.font.family;

function getFiltered() {
  const period = document.getElementById('filterPeriod').value;
  const pri = document.getElementById('filterPriority').value;
  const cat = document.getElementById('filterCategory').value;

  let filtered = [...allTickets];
  if (period === '1') filtered = filtered.filter(t => t.monthIndex === 5);
  else if (period === '3') filtered = filtered.filter(t => t.monthIndex >= 3);
  if (pri !== 'all') filtered = filtered.filter(t => t.priority === pri);
  if (cat !== 'all') filtered = filtered.filter(t => t.category === cat);
  return filtered;
}

function renderKPIs(data) {
  const total = data.length;
  const open = data.filter(t => t.status === 'Open' || t.status === 'In Progress').length;
  const resolved = data.filter(t => t.status === 'Resolved' || t.status === 'Closed').length;
  const resolvedTickets = data.filter(t => t.resolutionHours > 0);
  const avgRes = resolvedTickets.length ? (resolvedTickets.reduce((s,t) => s + t.resolutionHours, 0) / resolvedTickets.length).toFixed(1) : '‚Äî';
  const slaPct = data.length ? ((data.filter(t => t.slaMet).length / data.length) * 100).toFixed(1) : '‚Äî';
  const critical = data.filter(t => t.priority === 'Critical').length;

  document.getElementById('kpiRow').innerHTML = `
    <div class="kpi-card">
      <div class="label">Total Tickets</div>
      <div class="value">${total}</div>
      <div class="change neutral">‚¨§ 6-month period</div>
    </div>
    <div class="kpi-card">
      <div class="label">Open / In Progress</div>
      <div class="value" style="color:var(--orange)">${open}</div>
      <div class="change neutral">${((open/total)*100).toFixed(1)}% of total</div>
    </div>
    <div class="kpi-card">
      <div class="label">Resolved / Closed</div>
      <div class="value" style="color:var(--green)">${resolved}</div>
      <div class="change up">‚Üë ${((resolved/total)*100).toFixed(1)}% resolution rate</div>
    </div>
    <div class="kpi-card">
      <div class="label">Avg Resolution (hrs)</div>
      <div class="value" style="color:var(--cyan)">${avgRes}</div>
      <div class="change ${parseFloat(avgRes) < 24 ? 'up' : 'down'}">${parseFloat(avgRes) < 24 ? '‚Üì Within target' : '‚Üë Above target'}</div>
    </div>
    <div class="kpi-card">
      <div class="label">SLA Compliance</div>
      <div class="value" style="color:${parseFloat(slaPct) >= 90 ? 'var(--green)' : 'var(--red)'}">${slaPct}%</div>
      <div class="sla-bar"><div class="sla-bar-fill" style="width:${slaPct}%;background:${parseFloat(slaPct)>=90?'var(--green)':'var(--red)'}"></div></div>
    </div>
    <div class="kpi-card">
      <div class="label">Critical Incidents</div>
      <div class="value" style="color:var(--red)">${critical}</div>
      <div class="change ${critical < 20 ? 'up' : 'down'}">${((critical/total)*100).toFixed(1)}% of total</div>
    </div>
  `;
}

function makeChart(id, config) {
  if (charts[id]) charts[id].destroy();
  charts[id] = new Chart(document.getElementById(id), config);
}

function renderCharts(data) {
  // Active months
  const activeMonths = [...new Set(data.map(t => t.month))];
  const sortedMonths = months.filter(m => activeMonths.includes(m));

  // Trend
  const opened = sortedMonths.map(m => data.filter(t => t.month === m).length);
  const resolvedTrend = sortedMonths.map(m => data.filter(t => t.month === m && (t.status==='Resolved'||t.status==='Closed')).length);
  makeChart('trendChart', {
    type: 'line',
    data: {
      labels: sortedMonths,
      datasets: [
        { label: 'Opened', data: opened, borderColor: '#3b82f6', backgroundColor: 'rgba(59,130,246,0.1)', fill: true, tension: 0.3 },
        { label: 'Resolved', data: resolvedTrend, borderColor: '#22c55e', backgroundColor: 'rgba(34,197,94,0.1)', fill: true, tension: 0.3 }
      ]
    },
    options: { responsive: true, plugins: { legend: { position: 'top' } }, scales: { y: { beginAtZero: true } } }
  });

  // Priority Doughnut
  const priCounts = priorities.map(p => data.filter(t => t.priority === p).length);
  makeChart('priorityChart', {
    type: 'doughnut',
    data: {
      labels: priorities,
      datasets: [{ data: priCounts, backgroundColor: ['#ef4444','#f59e0b','#3b82f6','#22c55e'], borderWidth: 0 }]
    },
    options: { responsive: true, plugins: { legend: { position: 'right' } } }
  });

  // Category Bar
  const catCounts = categories.map(c => data.filter(t => t.category === c).length);
  makeChart('categoryChart', {
    type: 'bar',
    data: {
      labels: categories,
      datasets: [{ label: 'Tickets', data: catCounts, backgroundColor: ['#3b82f6','#8b5cf6','#06b6d4','#f59e0b','#22c55e','#ef4444'], borderRadius: 6 }]
    },
    options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
  });

  // Resolution Time
  const resData = sortedMonths.map(m => {
    const mTickets = data.filter(t => t.month === m && t.resolutionHours > 0);
    return mTickets.length ? (mTickets.reduce((s,t) => s + t.resolutionHours, 0) / mTickets.length).toFixed(1) : 0;
  });
  makeChart('resolutionChart', {
    type: 'bar',
    data: {
      labels: sortedMonths,
      datasets: [{ label: 'Avg Hours', data: resData, backgroundColor: '#8b5cf6', borderRadius: 6 }]
    },
    options: { responsive: true, plugins: { legend: { display: false } }, scales: { y: { beginAtZero: true } } }
  });

  // SLA Compliance
  const slaData = sortedMonths.map(m => {
    const mTickets = data.filter(t => t.month === m);
    return mTickets.length ? ((mTickets.filter(t => t.slaMet).length / mTickets.length) * 100).toFixed(1) : 0;
  });
  makeChart('slaChart', {
    type: 'line',
    data: {
      labels: sortedMonths,
      datasets: [{
        label: 'SLA %',
        data: slaData,
        borderColor: '#06b6d4',
        backgroundColor: 'rgba(6,182,212,0.1)',
        fill: true,
        tension: 0.3,
        pointRadius: 6,
        pointBackgroundColor: slaData.map(v => parseFloat(v) >= 90 ? '#22c55e' : '#ef4444')
      }, {
        label: 'Target (90%)',
        data: sortedMonths.map(() => 90),
        borderColor: 'rgba(239,68,68,0.5)',
        borderDash: [6,4],
        pointRadius: 0,
        fill: false
      }]
    },
    options: { responsive: true, plugins: { legend: { position: 'top' } }, scales: { y: { min: 60, max: 100 } } }
  });

  // Assignee Bar
  const assData = assignees.map(a => data.filter(t => t.assignee === a).length);
  makeChart('assigneeChart', {
    type: 'bar',
    data: {
      labels: assignees,
      datasets: [{ label: 'Tickets', data: assData, backgroundColor: '#3b82f6', borderRadius: 6 }]
    },
    options: { indexAxis: 'y', responsive: true, plugins: { legend: { display: false } }, scales: { x: { beginAtZero: true } } }
  });

  // Status Pie
  const statCounts = statuses.map(s => data.filter(t => t.status === s).length);
  makeChart('statusChart', {
    type: 'pie',
    data: {
      labels: statuses,
      datasets: [{ data: statCounts, backgroundColor: ['#3b82f6','#f59e0b','#22c55e','#64748b'], borderWidth: 0 }]
    },
    options: { responsive: true, plugins: { legend: { position: 'right' } } }
  });
}

function renderTable(data) {
  const critical = data
    .filter(t => t.priority === 'Critical' || t.priority === 'High')
    .sort((a,b) => b.date.localeCompare(a.date))
    .slice(0, 12);

  const badgeClass = {
    Critical: 'badge-critical', High: 'badge-high', Medium: 'badge-medium', Low: 'badge-low',
    Open: 'badge-open', 'In Progress': 'badge-inprogress', Resolved: 'badge-resolved', Closed: 'badge-closed'
  };

  document.getElementById('ticketTableBody').innerHTML = critical.map(t => `
    <tr>
      <td><strong>${t.id}</strong></td>
      <td>${t.title}</td>
      <td><span class="badge ${badgeClass[t.priority]}">${t.priority}</span></td>
      <td><span class="badge ${badgeClass[t.status]}">${t.status}</span></td>
      <td>${t.category}</td>
      <td>${t.assignee}</td>
      <td>${t.date}</td>
      <td>${t.slaMet ? '<span style="color:var(--green)">‚úì Met</span>' : '<span style="color:var(--red)">‚úó Breached</span>'}</td>
    </tr>
  `).join('');
}

function applyFilters() {
  const data = getFiltered();
  renderKPIs(data);
  renderCharts(data);
  renderTable(data);
}

// Initial render
applyFilters();
</script>
</body>
</html>
